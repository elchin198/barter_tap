Ã‡ox gÃ¶zÉ™l, artÄ±q build prosesi son mÉ™rhÉ™lÉ™yÉ™ gÉ™lib, amma bÉ™zi TypeScript sÉ™hvlÉ™ri sÉ™bÉ™bindÉ™n server hissÉ™sinin tam transpile olunmasÄ±na É™ngÉ™l yaranÄ±b.

ğŸ› ï¸ GÉ™lin addÄ±m-addÄ±m bu sÉ™hvlÉ™ri dÃ¼zÉ™ldÉ™k:
âœ… 1. isRead vÉ™ message kimi tanÄ±nmayan object propertylÉ™r
Bu sÉ™hv budur:

typescript
Copy
Edit
Object literal may only specify known properties, and 'isRead' does not exist in type ...
HÉ™ll:
SÉ™n insertMessageSchema, insertNotificationSchema vÉ™ s. kimi Zod vÉ™ ya tip skemalarla iÅŸlÉ™yirsÉ™n.

ÆgÉ™r sÉ™n aÅŸaÄŸÄ±dakÄ± kimi istifadÉ™ edirsÉ™nsÉ™:

ts
Copy
Edit
insertMessageSchema.parse({
  conversationId,
  senderId,
  content,
  isRead: false, // ERROR BURADA!
});
Amma insertMessageSchema-da isRead yoxdur. ÆlavÉ™ et:

ts
Copy
Edit
// shared/schema.ts
export const insertMessageSchema = z.object({
  conversationId: z.number(),
  senderId: z.number(),
  content: z.string(),
  status: z.string().optional(),
  isRead: z.boolean().optional(), // BURANI ÆLAVÆ ET
});
ğŸ‘‰ Eyni qayda ilÉ™ insertNotificationSchema vÉ™ digÉ™r schema fayllarÄ±nda da isRead, message, lastMessageAt varsa, onlarÄ± É™lavÉ™ et.

âœ… 2. Path-lar Ã¼Ã§Ã¼n .js É™lavÉ™ et
SÉ™hv:

cpp
Copy
Edit
Relative import paths need explicit file extensions in ECMAScript imports
HÉ™ll:
ts
Copy
Edit
// server/routes.ts
import { storage } from './storage.js';
ÆgÉ™r bu fayl .ts-dir, TypeScript onu .js-É™ Ã§evirÉ™cÉ™yindÉ™n .js yazmalÄ±san.

Eyni ÅŸeyi bÃ¼tÃ¼n bu tip importlara tÉ™tbiq et.

âœ… 3. @shared/schema tapÄ±lmÄ±r
SÉ™hv:

lua
Copy
Edit
Cannot find module '@shared/schema'
HÉ™ll:
Ya:

ts
Copy
Edit
import { insertUserSchema } from '../../shared/schema.js'; // real path
VÉ™ ya tsconfig.server.json-da paths É™lavÉ™ et:

json
Copy
Edit
{
  "compilerOptions": {
    ...
    "baseUrl": ".",
    "paths": {
      "@shared/*": ["shared/*"]
    }
  }
}
âœ… 4. WebSocket.Server problemi
SÉ™hv:

nginx
Copy
Edit
Property 'Server' does not exist on type 'typeof WebSocket'
HÉ™ll:
ÆgÉ™r sÉ™n ws paketi istifadÉ™ edirsÉ™nsÉ™:

ts
Copy
Edit
import WebSocket, { WebSocketServer } from 'ws';
vÉ™:

ts
Copy
Edit
const wss = new WebSocketServer({ server });
âœ… 5. TypeScript: userId vÉ™ username tip konfliktlÉ™ri
Bu da Ã§ox rast gÉ™linÉ™n bir sÉ™hvdir:

ts
Copy
Edit
// server/session.ts
declare module "express-session" {
  interface SessionData {
    userId: number | null; // hÉ™m burda...
    username: string | null;
    role: string | null;
  }
}
VÉ™ digÉ™r fayllarda da eyni tiplÉ™r olmalÄ±dÄ±r. ÆgÉ™r birindÉ™ userId?: number yazmÄ±sansa, digÉ™rindÉ™ userId: number | null, TypeScript narazÄ± qalÄ±r.

HÉ™ll:
BÃœTÃœN modullarda EYNÄ° TÄ°PÄ° saxla:

ts
Copy
Edit
userId: number | null;
username: string | null;
role: string | null;
âœ… 6. Vite server konfiqurasiyasÄ± â€“ allowedHosts
SÉ™hv:

pgsql
Copy
Edit
Type 'boolean' is not assignable to type 'true | string[] | undefined'
HÉ™ll:
ts
Copy
Edit
allowedHosts: true // âŒ sÉ™hvdir

// dÃ¼z:
allowedHosts: ['yourdomain.com', 'localhost']
âœ… NÉ™ etmÉ™li:
shared/schema.ts daxil ol vÉ™ isRead, message vÉ™ s. Ã¼Ã§Ã¼n uyÄŸun tiplÉ™ri É™lavÉ™ et.

BÃ¼tÃ¼n import path-larÄ±na .js É™lavÉ™ et (server fayllarÄ±nda).

@shared/schema Ã¼Ã§Ã¼n ya tsconfig yollarÄ±nÄ± dÃ¼zÉ™lt, ya da real path gÃ¶stÉ™r.

ws paketi Ã¼Ã§Ã¼n WebSocketServer istifadÉ™ et.

session.ts vÉ™ routes.ts daxilindÉ™ userId, username, role tiplÉ™rini eyni et.

vite.ts daxilindÉ™ allowedHosts dÉ™yÉ™rini true yox, array kimi ver